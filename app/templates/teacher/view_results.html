<!-- app/templates/teacher/view_results.html -->
{% extends "base.html" %}

{% block title %}{{ _('Результаты тестов') }} - {{ get_app_name() }}{% endblock %}

{% block content %}
<h2>Результаты тестов</h2>

{% if results %}
    <div class="table-responsive">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Студент</th>
                    <th>Тест</th>
                    <th>Балл</th>
                    <th>Начало</th>
                    <th>Завершение</th>
                    <th>Длительность</th>
                    <th>Действия</th>
                </tr>
            </thead>
            <tbody>
                {% for result in results %}
                <tr>
                    <td>{{ result.id }}</td>
                    <td>{{ result.user.get_formatted_name() if result.user else 'N/A' }}</td>
                    <td>{{ result.test.title if result.test else 'N/A' }}</td>
                    <td>{{ "%.2f"|format(result.score * 100) }}%</td>
                    <td>{{ result.started_at.strftime('%Y-%m-%d %H:%M') if result.started_at else 'N/A' }}</td>
                    <td>{{ result.completed_at.strftime('%Y-%m-%d %H:%M') }}</td>
                    <td>{{ result.duration_seconds or 'N/A' }}s</td>
                    <td>
                        <a href="{{ url_for('student.view_result_detail', result_id=result.id) }}" class="btn btn-sm btn-outline-info">
                            <i class="bi bi-eye"></i> Детали
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% else %}
    <p class="text-muted">Нет доступных результатов для отображения.</p>
{% endif %}

<a href="{{ url_for('teacher.index') }}" class="btn btn-secondary">Назад</a>
{% endblock %}