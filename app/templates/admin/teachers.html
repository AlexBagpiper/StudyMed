<!-- app/templates/admin/index.html (обновленный) -->
{% extends "base.html" %}

{% block title %}{{ _('Преподаватели') }} - {{ get_app_name() }}{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>{{ _('Преподаватели') }}</h2>
    <div>
        <span class="badge bg-primary">{{ current_user.role|title }}</span>
    </div>
</div>

<!-- Создание преподавателя -->
<div class="card mb-4">
    <div class="card-header">
        <h5 class="mb-0"><i class="bi bi-person-plus"></i>{{ _('Создать профиль преподавателя') }}</h5>
    </div>
    <div class="card-body">
        <form method="POST" action="{{ url_for('admin.create_teacher') }}">
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="last_name" class="form-label">
                        {{ _('Фамилия') }}<span class="text-danger">*</span>
                    </label>
                    <input type="text" class="form-control" id="last_name" name="last_name" required>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="first_name" class="form-label">
                        {{ _('Имя') }}<span class="text-danger">*</span>
                    </label>
                    <input type="text" class="form-control" id="first_name" name="first_name" required>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="middle_name" class="form-label">{{ _('Отчество') }}</label>
                    <input type="text" class="form-control" id="middle_name" name="middle_name">
                </div>
            </div>
            <div class="mb-3">
                <label for="group_number" class="form-label">{{ _('Номер группы') }}</label>
                <input type="text" class="form-control" id="group_number" name="group_number">
            </div>
            <div class="mb-3">
                <label for="username" class="form-label">
                    {{ _('Email') }}<span class="text-danger">*</span>
                </label>
                <input type="text" class="form-control" id="username" name="username" required>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="password" class="form-label">
                        {{ _('Пароль') }}<span class="text-danger">*</span>
                    </label>
                    <input type="password" class="form-control" id="password" name="password" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="confirm_password" class="form-label">
                        {{ _('Повторить пароль') }}<span class="text-danger">*</span>
                    </label>
                    <input type="password" class="form-control" id="confirm_password" name="confirm_password" required>
                </div>
            </div>
            <button type="submit" class="btn btn-primary">{{ _('Создать') }}</button>
        </form>
    </div>
</div>

<div class="table-responsive">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>{{ _('Имя пользователя') }}</th>
                <th>{{ _('Фамилия') }}</th>
                <th>{{ _('Имя') }}</th>
                <th>{{ _('Отчество') }}</th>
                <th>{{ _('Язык') }}</th>
                <th>{{ _('Тема') }}</th>
                <th>{{ _('Дата создания') }}</th>
                <th>{{ _('Действия') }}</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td>{{ user.username }}</td>
                <td>{{ user.first_name }}</td>
                <td>{{ user.last_name }}</td>
                <td>{{ user.middle_name }}</td>
                <td>{{ user.language }}</td>
                <td>{{ user.theme }}</td>
                <td>{{ user.created_at.strftime('%Y-%m-%d %H:%M') if user.created_at else _('N/A') }}</td>
                <td>
                    <a href="{{ url_for('database.edit_record', table='users', id=user.id) }}?next={{ request.url|urlencode }}"
                       class="btn btn-sm btn-outline-primary">
                        <i class="bi bi-pencil"></i> {{ _('Редактировать') }}
                    </a>
                    <a href="{{ url_for('database.delete_record', table='users', id=user.id) }}?next={{ request.url|urlencode }}"
                       class="btn btn-sm btn-outline-danger"
                       onclick="return confirm('{{ _('Удалить пользователя?') }}')">
                        <i class="bi bi-trash"></i> {{ _('Удалить') }}
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div class="d-grid gap-2">
        <a href="{{ url_for('admin.index') }}" class="btn btn-primary">{{ _('назад') }}</a>
    </div>
</div>

{% endblock %}